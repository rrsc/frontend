<!-- product-card.component.html -->
<mat-card class="product-card" (click)="onViewDetails($event)">
  <div class="card-header">
    <span class="category-badge" [ngClass]="product.category">
      {{ categoryLabel }}
    </span>
    <span class="stock-status" [ngClass]="{'low-stock': isLowStock, 'out-of-stock': isOutOfStock}">
      {{ stockStatus }}
    </span>
  </div>

  <div class="image-container">
    <img 
      [src]="product.imageUrl || 'assets/images/default-product.png'" 
      [alt]="product.name"
      class="product-image"
    />
  </div>

  <mat-card-content>
    <h3 class="product-title">{{ product.name }}</h3>
    <p class="product-description" *ngIf="product.description">
      {{ product.description | truncate: 100 }}
    </p>
    <div class="product-price">
      <span class="price">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</span>
    </div>
  </mat-card-content>

  <mat-card-actions *ngIf="showActions">
    <button 
      mat-raised-button 
      color="primary"
      (click)="onAddToCart($event)"
      [disabled]="isOutOfStock"
      class="add-to-cart-btn"
    >
      <mat-icon>add_shopping_cart</mat-icon>
      AÃ±adir al carrito
    </button>
    
    <div *ngIf="quantityInCart > 0" class="cart-indicator">
      <mat-icon>shopping_cart</mat-icon>
      <span>{{ quantityInCart }} en carrito</span>
    </div>
  </mat-card-actions>
</mat-card>
