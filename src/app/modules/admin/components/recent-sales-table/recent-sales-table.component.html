<div class="recent-sales-table">
  <div *ngIf="loading" class="loading-state">
    <mat-spinner diameter="30"></mat-spinner>
    <span>Cargando ventas...</span>
  </div>
  
  <div *ngIf="!loading" class="table-container">
    <table mat-table [dataSource]="recentSales" class="full-width">
      <!-- Customer Column -->
      <ng-container matColumnDef="customer">
        <th mat-header-cell *matHeaderCellDef> Cliente </th>
        <td mat-cell *matCellDef="let sale" class="customer-cell">
          <div class="customer-info">
            <mat-icon class="customer-icon">person</mat-icon>
            <div class="customer-details">
              <div class="customer-name">{{ sale.customerName }}</div>
              <div class="sale-id text-gray-600 text-xs">#{{ sale.id }}</div>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Fecha </th>
        <td mat-cell *matCellDef="let sale" class="date-cell">
          <div class="date-info">
            <div class="date-value">{{ formatDate(sale.date) }}</div>
            <div class="time-value text-gray-600 text-xs">
              {{ sale.date | date:'HH:mm' }}
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Amount Column -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef> Monto </th>
        <td mat-cell *matCellDef="let sale" class="amount-cell">
          <div class="amount-value">
            {{ sale.amount | currency:'USD':'symbol':'1.2-2' }}
          </div>
        </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Estado </th>
        <td mat-cell *matCellDef="let sale" class="status-cell">
          <mat-chip 
            [color]="getStatusColor(sale.status)" 
            [selected]="true"
            class="status-chip"
          >
            {{ getStatusLabel(sale.status) }}
          </mat-chip>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="text-right"> </th>
        <td mat-cell *matCellDef="let sale" class="actions-cell">
          <button 
            mat-icon-button 
            color="primary"
            (click)="viewSale(sale.id)"
            matTooltip="Ver detalles"
            class="action-btn"
          >
            <mat-icon>visibility</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <!-- Empty state -->
    <div *ngIf="recentSales.length === 0" class="empty-state">
      <mat-icon class="empty-icon">receipt</mat-icon>
      <p>No hay ventas recientes</p>
    </div>
  </div>
</div>
